!function(e,t){var a=e.jQuery;if("function"==typeof define&&define.amd)a?define([],t.bind(null,a)):define(["jquery"],t);else if("object"==typeof exports)module.exports=t(a?a:require("jquery"));else{if(!a)throw"Missing required jQuery dependency";t(a)}}(this,function(e){function t(e,t,n){var i=e.find("canvas"),r=i[0];r.width=e.width()+10,r.height=e.height()+10;var o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),o.beginPath();var d=e.width()/2;o.arc(r.width/2,r.height/2,d,a(t)-Math.PI/2,a(n)-Math.PI/2,!1),o.lineWidth=8,o.strokeStyle=i.css("color"),o.stroke()}function a(e){return e*(Math.PI/180)}function n(a){var n=a.find(".handle"),i=a.find(".handle1"),r=a.find(".handle2"),o=a.width();a.height(o);var d=o/2,l=n.width(),s=n.height();n.each(function(t,n){var i=e(n),r=i.attr("data-value"),o=Math.round(d*Math.sin(r*Math.PI/180)),u=Math.round(d*-Math.cos(r*Math.PI/180));i.css({left:o+d-l/2,top:u+d-s/2}),a.find(i.attr("data-value-target")).html(i.attr("data-value")+"&deg;")}),value1=i.attr("data-value"),value2=r.attr("data-value"),t(a,value1,value2),a.find("input").val(value1+";"+value2).trigger("change")}function i(t){var a=t.val()||"0;0";a=a.split(";");var i=parseInt(a[0],10),d=parseInt(a[1],10);$container=e('<div class="circle-range-select-wrapper"></div>'),t.wrap($container),$container=t.parent(),$container.append('<div class="handle handle1" data-value="'+i+'" data-value-target=".value1"></div>'),$container.append('<div class="handle handle2" data-value="'+d+'" data-value-target=".value2"></div>'),$container.append('<div class="values"><span class="value1"></span> - <span class="value2"></span></div>'),$container.append('<canvas class="selected-range"></canvas>'),n($container),$container.on("mousedown touchstart",".handle",function(t){r=!0,t.preventDefault(),o=e(t.target),e(document).one("mouseup touchend",function(){r=!1,o=null})}),e(window).on("resize",n.bind(null,$container))}var r=!1,o=null;e(document).on("mousemove touchmove",function(t){if(r){var a=o.closest(".circle-range-select-wrapper"),i=a.width()/2;if(!t.offsetX&&t.originalEvent.touches){var d=e(t.target).offset();t.offsetX=t.originalEvent.touches[0].pageX-d.left,t.offsetY=t.originalEvent.touches[0].pageY-d.top}else if("undefined"==typeof t.offsetX||"undefined"==typeof t.offsetY){var d=e(t.target).offset();t.offsetX=t.pageX-d.left,t.offsetY=t.pageY-d.top}var l={x:t.target.offsetLeft+t.offsetX,y:t.target.offsetTop+t.offsetY},s=Math.atan2(l.x-i,l.y-i),u=-s/(Math.PI/180)+180,f=Math.abs(u-90*Math.round(u/90));5>=f&&(u=90*Math.round(u/90)),360==u&&(u=0);var c=Math.round(u);o.attr("data-value",c),n(a)}}),e.fn.lcnCircleRangeSelect=function(){return this.each(function(){i(e(this))})}});